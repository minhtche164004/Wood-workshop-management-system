<app-dashboard-admin></app-dashboard-admin>

<div class="dashboard-main">

  <div class="container-fluid">
    <div class="table-responsive">
      <div class="table-wrapper">
        <div class="table-title">
          <div class="row " style="height: 60px;">
            <div class="col-sm-5 ">
              <h2 style="margin-bottom: 0;">Quản lý đơn yêu cầu</h2>
            </div>
            <div class="col-sm-7 text-end d-flex align-items-center justify-content-end">
              <!-- <a href="#" class="btn btn-secondary btn-sm" data-toggle="modal" data-target="#addAccountModal"
                  style="font-size: 14px;">
                  <i class="material-icons align-middle" style="font-size: 18px;">&#xE147;</i>
                  <span class="align-middle">Thêm Người Dùng</span>
                </a> -->
            </div>
          </div>

          <div class="row">
            <div class="col-md-7"></div> <!-- Dummy column to push the search box to the right -->
            <div class="col-md-5 text-end">
              <div class="input-group mb-3">
                <!-- product.component.html -->
                <!-- <select [ngModel]="selectedCategory">
                    <option value="null" disabled selected>Phân quyền</option>
                    <option *ngFor="let ps of position" [value]="ps.position_id">{{ ps.position_name }}</option>
                  </select> -->

                <input type="text" class="form-control" placeholder="Mã nhân viên">
                <button class="btn search-button" type="button">
                  <i class="fa fa-search"></i>
                </button>


              </div>
            </div>
          </div>
        </div>
        <div class="table-container">
          <div class="table-responsive">
            <table class="table table-striped table-hover">
              <thead>
                <tr>
                  <th>Mã đơn hàng</th>
                  <th>Thao tác</th>
                  <th>Vị Trí Nhân Viên</th>
                  <th>Ngày yêu cầu</th>
                  <th>Duyệt yêu cầu công việc</th>
                  <th>Mô tả đơn hàng</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  *ngFor="let job of list_request_customer | paginate: { itemsPerPage: 10, currentPage: currentPage }; let i = index">
                  <td style="min-width: 150px;">{{ job.code }}</td>
      

                  <td class="action-buttons">
                    <a href="#" class="settings" title="Edit" data-toggle="modal" data-target="#editAccountModal"
                      (click)="getDataRequest(job.requestId)">

                      <i class="fa-solid fa-pen-to-square"></i>
                    </a>
                    <!-- <a href="#" class="accept" title="Chấp nhận" data-toggle="modal" data-target="#acceptModal">
                        <i class="fas fa-check-circle"></i>
                      </a>
                      <a href="#" class="reject" title="Từ chối" data-toggle="modal" data-target="#rejectModal">
                        <i class="fas fa-times-circle"></i>
                      </a> -->
                  </td>
                  <td style="min-width: 50px;">{{ job?.user?.position?.position_name }}</td>
                  <td>{{ job.requestDate | date:'dd/MM/yyyy' }}</td>
                  <td style="min-width: 100px;">{{ job?.status?.status_name }}</td>
                  <td style="min-width: 200px;">{{ job.description }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>


        <pagination-controls style="justify-content: right; display: flex;" (pageChange)="currentPage = $event"
          previousLabel="Trang trước" nextLabel="Trang sau">
        </pagination-controls>
        <div class="clearfix" style="justify-content: right; display: flex;">
          <div class="hint-text">Hiển thị <b>{{ (currentPage - 1) * 10 + 1 }}</b> tới <b>{{ currentPage * 10
              > list_request_customer.length ? list_request_customer.length : currentPage * 10 }}</b> trong tổng <b>{{
              list_request_customer.length }}</b> dữ liệu</div>
        </div>


      </div>
    </div>
  </div>
</div>
<form [formGroup]="Accept_Reject_rForm"  (ngSubmit)="EditRequestAccept()">
  <div style="margin: 50px 0px 100px 100px;" class="modal fade" id="editAccountModal" tabindex="-1" role="dialog"
    aria-labelledby="editAccountModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editAccountModalLabel">Duyệt công việc</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-row">
            <div class="form-group col-md-12">
              <label for="username">Lí do từ chối</label>
              <input formControlName="response" type="text" class="form-control form-control-lg"
                [(ngModel)]="RequestData.requestId">

            </div>

          </div>
          <div class="row">
            <div class="form-group col-md-12">
              <label for="role">Vật Liệu</label>
              <div>
                <select [(ngModel)]="selectedStatus" formControlName="status_id"
                  class="form-control form-control-lg">
                  <option [ngValue]="null" disabled selected>Duyệt đơn</option>
                  <option *ngFor="let st of status_request" [ngValue]="st.status_id">
                    {{ st.status_name }}
                  </option>
                </select>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-mau-do" data-dismiss="modal" #closeButton>Đóng</button>
          <button type="submit" class="btn btn-primary">Lưu Thay Đổi</button>
        </div>
      </div>
    </div>
  </div>

</form>