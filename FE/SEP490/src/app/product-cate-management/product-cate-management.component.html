<app-dashboard></app-dashboard>

<div class="dashboard-main">
  <div class="container-fluid">
    <div class="table-responsive">
      <div class="table-wrapper">
        <div class="table-title">
          <div class="row " style="height: 60px;">
            <h2>Quản lý kiểu sản phẩm</h2>
          </div>
       
          <table class="table table-striped table-hover">
          </table>

          <div class="row">
            <div class="col-md-7"></div> <!-- Dummy column to push the search box to the right -->
            <div class="col-md-5 text-end">
              <div class="input-group mb-3">
           
                <select >
                  <option [value]="0">Chưa khắc phục</option>
                    <option [value]="-1">Tất cả trạng thái</option>

                    <option [value]="1">Đã khắc phục</option>
                  </select> 
                <input type="text" class="form-control" placeholder="Tìm kiếm báo cáo lỗi sản phẩm...">
                  <button class="btn search-button" type="button" >
                    <i class="fa fa-search"></i>
                  </button>
  
              </div>
            </div>
          </div>
          
        </div>
      </div>

      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>STT</th>
            <th>Mã việc làm</th>
            <th>Thao tác</th>
            <th style="width: 25%; text-align: center;">Mô tả lỗi</th>
            <th>Tình trạng</th>
            <th style="text-align: center; width: 10%;">Số sản phẩm lỗi</th>
            <th style="width: 25%; text-align: center;">Giải pháp</th>
          </tr>
        </thead>

        <tbody>
          <tr
            *ngFor="let product of errorProducts | paginate: { itemsPerPage: 10, currentPage: currentPage }; let i = index">
            <td>{{ i + 1 + (currentPage - 1) * 10 }}</td>
            <td>{{ product.code }}</td>
            <!-- <td class="action-buttons">
              <a href="#" class="settings" title="Chỉnh sửa" data-toggle="modal" data-target="#editProductModal"
                (click)="editProduct(product.id)">
                <i class="fa-solid fa-pen-to-square"></i>
              </a>
              <a href="#" class="delete" title="Xóa" data-toggle="modal" data-target="#confirmDeleteModal"
                (click)="openConfirmDeleteModal(product.id, product.product_name, product.code)">
                <i class="fa-regular fa-trash-can"></i>
              </a>
              <a href="#" class="info" title="Chi tiết" data-toggle="modal" data-target="#productDetailModal"
                (click)="showErrorDetails(product.id)">
                <i class="fa-solid fa-circle-info"></i>
              </a>
            </td> -->
            <td>{{ product?.des }}</td>
            <td>
              <!-- {{ product.fix }} -->
              <ng-container *ngIf="product.fix; else notFixed" >
              <span style="color: green;"> <b>Đã khắc phục</b> </span>
              </ng-container>
              <ng-template #notFixed><span style="color: red;"><b>Chưa khắc phục</b></span></ng-template>
            </td>
            <td style="text-align: end;">{{ product?.quantity }}</td>
            <td>{{ product.solution }}</td>
          </tr>
        </tbody>
      </table>

      <pagination-controls style="justify-content: right; display: flex;"
          (pageChange)="currentPage = $event"
          previousLabel="Trang trước"
          nextLabel="Trang sau">
        </pagination-controls>
        <div class="clearfix" style="justify-content: right; display: flex;">
          <div class="hint-text">Hiển thị <b>{{ (currentPage - 1) * 10 + 1 }}</b> tới <b>{{ currentPage * 10
              > errorProducts.length ? errorProducts.length : currentPage * 10 }}</b> trong tổng <b>{{
                errorProducts.length }}</b> dữ liệu</div>
        </div>


    </div>
  </div>
</div>


<div *ngIf="isLoadding" class="loading-overlay">
  <div class="spinner"></div>
</div>